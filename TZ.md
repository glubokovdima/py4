üìä **–ê–Ω–∞–ª–∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∫—Ä–∏–ø—Ç–æ–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è**
–¢—ã –≤—ã—Å—Ç—Ä–æ–∏–ª –º–æ—â–Ω—É—é ML-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–≤–∏–∂–µ–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç. –†–∞–∑–ª–æ–∂–∏–º –ø–æ –±–ª–æ–∫–∞–º:

---

### üîÅ **–û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞**

1. **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö** (`old_update_binance_data.py`)

   * –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–≤–µ—á–∏ —Å Binance (–¥–æ 50 —Ç—ã—Å –Ω–∞ —Å–∏–º–≤–æ–ª/—Ç–∞–π–º—Ñ—Ä–µ–π–º).
   * –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ SQLite `candles_{tf}`.

2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** (`preprocess_features.py`)

   * –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–≤–µ—á–∏ –ø–æ TF.
   * –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã —Å—Ç—Ä–æ—è—Ç—Å—è:

     * TA-–ø—Ä–∏–∑–Ω–∞–∫–∏: RSI, EMA, MACD, OBV, ATR, BollingerBands –∏ –¥—Ä.
     * –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Ñ–∏—á–∏: `volume_z`, `pin_bar`, `consecutive_up`, `volume_spike`, `doji`, `hour_sin`, `dayofweek_sin` –∏ –¥—Ä.
     * –¶–µ–ª–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

       * `target_class` (UP/DOWN)
       * `delta`, `volatility` 
       * `target_tp_hit` (–µ—Å–ª–∏ `delta > 0.005`)

3. **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** (`train_model.py`)

   * 3 –∫–ª—é—á–µ–≤—ã–µ –º–æ–¥–µ–ª–∏:

     * `clf_class`: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (`UP/DOWN`) –Ω–∞ –æ—Å–Ω–æ–≤–µ CatBoost + RandomSearch
     * `reg_delta`: —Ä–µ–≥—Ä–µ—Å—Å–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã
     * `reg_vol`: —Ä–µ–≥—Ä–µ—Å—Å–∏—è –Ω–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
     * `clf_tp_hit`: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ TP > 0.5% (`delta > 0.005`)
   * –û–±—É—á–µ–Ω–∏–µ –Ω–∞ GPU —Å –ø–æ–¥–±–æ—Ä–æ–º –≤–µ—Å–æ–≤ –∫–ª–∞—Å—Å–æ–≤ –∏ —Ñ–∏—á–µ–π
   * –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫, –º–æ–¥–µ–ª–µ–π, JSON-—Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏

4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤** (`predict_all.py`)

   * –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–æ–¥–µ–ª–∏ –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –Ω–æ–≤—ã–º –¥–∞–Ω–Ω—ã–º
   * –í—ã–≤–æ–¥: —Ç–∞–±–ª–∏—Ü—ã —Å:

     * –°–∏–≥–Ω–∞–ª–æ–º (`LONG/SHORT`)
     * –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é `Conf`
     * Œî –ø–æ –º–æ–¥–µ–ª–∏ / –∏—Å—Ç–æ—Ä–∏–∏ / —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –º–µ—Ç—Ä–∏–∫–µ
     * œÉ (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
     * `TP Hit%` (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP)

---

### üìà **–ê–Ω–∞–ª–∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤**

#### –ü—Ä–∏–º–µ—Ä: **ADAUSDT**

| TF  | –°–∏–≥–Ω–∞–ª | ŒîFinal | Conf | TP Hit% |
| --- | ------ | ------ | ---- | ------- |
| 15m | SHORT  | 0.12%  | 0.43 | 67.3%   |
| 30m | SHORT  | 1.35%  | 0.77 | 54.8%   |
| 1h  | LONG   | 0.29%  | 0.73 | 56.8%   |

**–í—ã–≤–æ–¥:**

* –ù–∞ 15m –∏ 30m ‚Äî **–Ω–∏—Å—Ö–æ–¥—è—â–∏–π –∏–º–ø—É–ª—å—Å**.
* 1h —Å–∏–≥–Ω–∞–ª–∏—Ç –ª–æ–Ω–≥, –Ω–æ —Å –Ω–µ–±–æ–ª—å—à–∏–º –ø—Ä–∏—Ä–æ—Å—Ç–æ–º ‚Äî –≤–µ—Ä–æ—è—Ç–µ–Ω **–æ—Ç–∫–∞—Ç** –ª–∏–±–æ **—Ä–∞–∑–≤–æ—Ä–æ—Ç** —Ç—Ä–µ–Ω–¥–∞.
* –í—ã—Å–æ–∫–∞—è œÉ (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å) –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç **–Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**.
* TP Hit% > 50% ‚Üí —Å–∏–≥–Ω–∞–ª—ã —Å–ª–∞–±—ã–µ, –Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ.

---

### üß† **–ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ö–æ—Ä–æ—à–æ**

‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞
‚úÖ –ì–ª—É–±–æ–∫–∞—è —Ñ–∏—á–µ–∏–Ω–∂–µ–Ω–µ—Ä–∏—è —Å TA + –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
‚úÖ –û–±—É—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ + —Ä–µ–≥—Ä–µ—Å—Å–æ—Ä–æ–≤ + TP-hit
‚úÖ –£—á–µ—Ç –≤–µ—Å–∞ –∫–ª–∞—Å—Å–æ–≤ + RandomSearch
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤/–≥—Ä—É–ø–ø (top8, meme, defi)

---

### ‚ùó –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

#### 1. **–ü—Ä–æ–≥–Ω–æ–∑—ã —Å–ª–∞–±—ã–µ / –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ Trade? = ‚ùå**

* –ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –±–ª–æ–∫ `decision logic` –≤ `predict_all.py`:

  * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ `Conf > X`, –∞:

    * `|ŒîFinal| > threshold`
    * `œÉHist < threshold`
    * `TP Hit% > 60%`
    * –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –º–µ–∂–¥—É TF (–Ω–∞–ø—Ä–∏–º–µ—Ä: 15m+30m –æ–±–∞ SHORT)

‚û° **–¶–µ–ª—å:** —Å–¥–µ–ª–∞—Ç—å –±–ª–æ–∫ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –≥–∏–±–∫–∏–º –∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã–º —Å–∏–≥–Ω–∞–ª–∞–º.

---

#### 2. **–î–æ–±–∞–≤–∏—Ç—å context-aware –ø—Ä–æ–≥–Ω–æ–∑ (–º—É–ª—å—Ç–∏-TF)**

–ï—Å–ª–∏ –Ω–∞ 15m —Å–∏–≥–Ω–∞–ª SHORT, –Ω–æ 1h ‚Äî LONG, –∞ 4h ‚Äî FLAT ‚Üí –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é.
–ù—É–∂–Ω–æ:

* –°–∫–ª–µ–∏–≤–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—ã —Ä–∞–∑–Ω—ã—Ö TF
* –ò—Å–∫–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ 2+ TF
* –ü—Ä–∏–º–µ—Ä: `score = w1 * 15m + w2 * 30m + w3 * 1h`

---

#### 3. **TP-Hit –º–æ–¥–µ–ª—å ‚Äî –Ω–µ–¥–æ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞**

–¢—ã –æ–±—É—á–∞–µ—à—å `clf_tp_hit`, –Ω–æ –≤ –ø—Ä–æ–≥–Ω–æ–∑–∞—Ö –æ–Ω–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ `Trade?`.
–†–µ—à–µ–Ω–∏–µ:

* –í–≤–µ—Å—Ç–∏ `TP_Hit_Proba > X` –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å > 0.6)
* –î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É —Å—Ç–æ–ª–±–µ—Ü `TP Hit Proba` (predict\_proba)

---

#### 4. **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤: –¥–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é**

* –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ (Plotly / matplotlib)
* –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç—Ä–µ–ª–∫–∏ –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤
* –¶–≤–µ—Ç–∞: –∑–µ–ª—ë–Ω—ã–π ‚Äî LONG, –∫—Ä–∞—Å–Ω—ã–π ‚Äî SHORT, —Å–µ—Ä—ã–π ‚Äî —Å–ª–∞–±—ã–π

---

### ‚úÖ –ß—Ç–æ –ø—Ä–µ–¥–ª–æ–∂—É –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (roadmap)

| ‚Ññ | –ë–ª–æ–∫                     | –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å                                                        |
| - | ------------------------ | ------------------------------------------------------------------ |
| 1 | `predict_all.py`         | –†–∞—Å—à–∏—Ä–∏—Ç—å –±–ª–æ–∫ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π: ŒîFinal, œÉHist, TP-hit      |
| 2 | TP-hit –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è        | –í–∫–ª—é—á–∏—Ç—å predict\_proba –¥–ª—è clf\_tp\_hit ‚Üí –≤–ª–∏—è—Ç—å –Ω–∞ Trade?        |
| 3 | –ú—É–ª—å—Ç–∏-TF —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ   | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ 15m/30m/1h (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ vote/scoring) |
| 4 | –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Å —Ç—Ä–µ–π–¥–æ–º | –°–æ—Ö—Ä–∞–Ω—è—Ç—å —É—Å–ø–µ—Ö–∏/–æ—à–∏–±–∫–∏ ‚Üí —Ä–µ—Ñ–∏—Ç –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—à–∏–±–∫–∞—Ö                  |
| 5 | –ì—Ä–∞—Ñ–∏–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤         | Plotly-–≥—Ä–∞—Ñ–∏–∫ —Å —Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ –∏ –∏–Ω—Ñ–æ-–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏            |

---

–•–æ—á–µ—à—å ‚Äî –ø–æ–º–æ–≥—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—à–∞–≥–æ–≤–æ –∫–∞–∂–¥—É—é –¥–æ—Ä–∞–±–æ—Ç–∫—É. –° —á–µ–≥–æ –Ω–∞—á–Ω—ë–º?
